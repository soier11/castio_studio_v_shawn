{"ast":null,"code":"import _objectSpread from\"/Users/soier/Code/studio_v_shawn/studio_v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Fragment}from\"react\";import ChartComponent,{Chart}from\"react-chartjs-2\";import{smallLineChartOptions}from\"./config\";const addCommas=nStr=>{nStr+=\"\";var x=nStr.split(\".\");var x1=x[0];var x2=x.length>1?\".\"+x[1]:\"\";var rgx=/(\\d+)(\\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,\"$1,$2\");}return x1+x2;};export default class SmallLine extends React.Component{constructor(props){super(props);this.changeState=this.changeState.bind(this);this.state={currentValue:\"\",currentLabel:\"\"};Chart.defaults.lineWithLine=Chart.defaults.line;Chart.controllers.lineWithLine=Chart.controllers.line.extend({draw:function draw(ease){Chart.controllers.line.prototype.draw.call(this,ease);if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var activePoint=this.chart.tooltip._active[0];var ctx=this.chart.ctx;var x=activePoint.tooltipPosition().x;var topY=this.chart.scales[\"y-axis-0\"].top;var bottomY=this.chart.scales[\"y-axis-0\"].bottom;ctx.save();ctx.beginPath();ctx.moveTo(x,topY);ctx.lineTo(x,bottomY);ctx.lineWidth=1;ctx.strokeStyle=\"rgba(0,0,0,0.1)\";ctx.stroke();ctx.restore();}}});}changeState(yLabel,xLabel){this.setState({currentValue:yLabel,currentLabel:xLabel});}render(){const changeState=this.changeState;const data=this.props.data;return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"lead color-theme-1 mb-1 value\"},this.state.currentValue),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-0 label text-small\"},this.state.currentLabel)),/*#__PURE__*/React.createElement(\"div\",{className:\"chart\"},/*#__PURE__*/React.createElement(ChartComponent,{ref:_ref=>this.chart_instance=_ref&&_ref.chart_instance,type:\"lineWithLine\",options:_objectSpread({},smallLineChartOptions,{tooltips:{intersect:false,enabled:false,custom:function custom(tooltipModel){if(tooltipModel&&tooltipModel.dataPoints){var yLabel=tooltipModel.dataPoints[0].yLabel;var xLabel=tooltipModel.dataPoints[0].xLabel;var label=tooltipModel.body[0].lines[0].split(\":\")[0];changeState(\"$\"+addCommas(yLabel),label+\"-\"+xLabel);}}}}),plugins:[{afterInit:function afterInit(chart,options){var yLabel=chart.data.datasets[0].data[0];var xLabel=chart.data.labels[0];var label=chart.data.datasets[0].label;changeState(\"$\"+addCommas(yLabel),label+\"-\"+xLabel);}}],data:data})));}}","map":{"version":3,"sources":["/Users/soier/Code/studio_v_shawn/studio_v2/src/components/charts/SmallLine.js"],"names":["React","Fragment","ChartComponent","Chart","smallLineChartOptions","addCommas","nStr","x","split","x1","x2","length","rgx","test","replace","SmallLine","Component","constructor","props","changeState","bind","state","currentValue","currentLabel","defaults","lineWithLine","line","controllers","extend","draw","ease","prototype","call","chart","tooltip","_active","activePoint","ctx","tooltipPosition","topY","scales","top","bottomY","bottom","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","yLabel","xLabel","setState","render","data","ref","chart_instance","tooltips","intersect","enabled","custom","tooltipModel","dataPoints","label","body","lines","afterInit","options","datasets","labels"],"mappings":"gKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,cAAP,EAAyBC,KAAzB,KAAsC,iBAAtC,CAEA,OAAQC,qBAAR,KAAoC,UAApC,CAEA,KAAMC,CAAAA,SAAS,CAAGC,IAAI,EAAI,CACxBA,IAAI,EAAI,EAAR,CACA,GAAIC,CAAAA,CAAC,CAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAR,CACA,GAAIC,CAAAA,EAAE,CAAGF,CAAC,CAAC,CAAD,CAAV,CACA,GAAIG,CAAAA,EAAE,CAAGH,CAAC,CAACI,MAAF,CAAW,CAAX,CAAe,IAAMJ,CAAC,CAAC,CAAD,CAAtB,CAA4B,EAArC,CACA,GAAIK,CAAAA,GAAG,CAAG,cAAV,CACA,MAAOA,GAAG,CAACC,IAAJ,CAASJ,EAAT,CAAP,CAAqB,CACnBA,EAAE,CAAGA,EAAE,CAACK,OAAH,CAAWF,GAAX,CAAgB,OAAhB,CAAL,CACD,CACD,MAAOH,CAAAA,EAAE,CAAGC,EAAZ,CACD,CAVD,CAYA,cAAe,MAAMK,CAAAA,SAAN,QAAwBf,CAAAA,KAAK,CAACgB,SAAU,CACrDC,WAAW,CAACC,KAAD,CAAQ,CACjB,MAAMA,KAAN,EACA,KAAKC,WAAL,CAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB,CACA,KAAKC,KAAL,CAAa,CACXC,YAAY,CAAE,EADH,CAEXC,YAAY,CAAE,EAFH,CAAb,CAIApB,KAAK,CAACqB,QAAN,CAAeC,YAAf,CAA8BtB,KAAK,CAACqB,QAAN,CAAeE,IAA7C,CACAvB,KAAK,CAACwB,WAAN,CAAkBF,YAAlB,CAAiCtB,KAAK,CAACwB,WAAN,CAAkBD,IAAlB,CAAuBE,MAAvB,CAA8B,CAC7DC,IAAI,CAAE,cAASC,IAAT,CAAe,CACnB3B,KAAK,CAACwB,WAAN,CAAkBD,IAAlB,CAAuBK,SAAvB,CAAiCF,IAAjC,CAAsCG,IAAtC,CAA2C,IAA3C,CAAiDF,IAAjD,EAEA,GAAI,KAAKG,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,EAA8B,KAAKF,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2BxB,MAA7D,CAAqE,CACnE,GAAIyB,CAAAA,WAAW,CAAG,KAAKH,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,CAA3B,CAAlB,CACA,GAAIE,CAAAA,GAAG,CAAG,KAAKJ,KAAL,CAAWI,GAArB,CACA,GAAI9B,CAAAA,CAAC,CAAG6B,WAAW,CAACE,eAAZ,GAA8B/B,CAAtC,CACA,GAAIgC,CAAAA,IAAI,CAAG,KAAKN,KAAL,CAAWO,MAAX,CAAkB,UAAlB,EAA8BC,GAAzC,CACA,GAAIC,CAAAA,OAAO,CAAG,KAAKT,KAAL,CAAWO,MAAX,CAAkB,UAAlB,EAA8BG,MAA5C,CAEAN,GAAG,CAACO,IAAJ,GACAP,GAAG,CAACQ,SAAJ,GACAR,GAAG,CAACS,MAAJ,CAAWvC,CAAX,CAAcgC,IAAd,EACAF,GAAG,CAACU,MAAJ,CAAWxC,CAAX,CAAcmC,OAAd,EACAL,GAAG,CAACW,SAAJ,CAAgB,CAAhB,CACAX,GAAG,CAACY,WAAJ,CAAkB,iBAAlB,CACAZ,GAAG,CAACa,MAAJ,GACAb,GAAG,CAACc,OAAJ,GACD,CACF,CApB4D,CAA9B,CAAjC,CAsBD,CAEDhC,WAAW,CAACiC,MAAD,CAASC,MAAT,CAAiB,CAC1B,KAAKC,QAAL,CAAc,CAAEhC,YAAY,CAAE8B,MAAhB,CAAwB7B,YAAY,CAAE8B,MAAtC,CAAd,EACD,CAEDE,MAAM,EAAG,CACP,KAAMpC,CAAAA,WAAW,CAAG,KAAKA,WAAzB,CADO,KAEAqC,CAAAA,IAFA,CAEQ,KAAKtC,KAFb,CAEAsC,IAFA,CAIP,mBACE,oBAAC,QAAD,mBACE,4CACE,yBAAG,SAAS,CAAC,+BAAb,EACG,KAAKnC,KAAL,CAAWC,YADd,CADF,cAIE,yBAAG,SAAS,CAAC,uBAAb,EAAsC,KAAKD,KAAL,CAAWE,YAAjD,CAJF,CADF,cAOE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,cAAD,EACE,GAAG,CAAEkC,IAAG,EAAK,KAAKC,cAAL,CAAsBD,IAAG,EAAIA,IAAG,CAACC,cADhD,CAEE,IAAI,CAAC,cAFP,CAGE,OAAO,kBACFtD,qBADE,EAELuD,QAAQ,CAAE,CACRC,SAAS,CAAE,KADH,CAERC,OAAO,CAAE,KAFD,CAGRC,MAAM,CAAE,gBAASC,YAAT,CAAuB,CAC7B,GAAIA,YAAY,EAAIA,YAAY,CAACC,UAAjC,CAA6C,CAC3C,GAAIZ,CAAAA,MAAM,CAAGW,YAAY,CAACC,UAAb,CAAwB,CAAxB,EAA2BZ,MAAxC,CACA,GAAIC,CAAAA,MAAM,CAAGU,YAAY,CAACC,UAAb,CAAwB,CAAxB,EAA2BX,MAAxC,CACA,GAAIY,CAAAA,KAAK,CAAGF,YAAY,CAACG,IAAb,CAAkB,CAAlB,EAAqBC,KAArB,CAA2B,CAA3B,EAA8B3D,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,CAAZ,CACAW,WAAW,CAAC,IAAMd,SAAS,CAAC+C,MAAD,CAAhB,CAA0Ba,KAAK,CAAG,GAAR,CAAcZ,MAAxC,CAAX,CACD,CACF,CAVO,CAFL,EAHT,CAkBE,OAAO,CAAE,CACP,CACEe,SAAS,CAAE,mBAASnC,KAAT,CAAgBoC,OAAhB,CAAyB,CAClC,GAAIjB,CAAAA,MAAM,CAAGnB,KAAK,CAACuB,IAAN,CAAWc,QAAX,CAAoB,CAApB,EAAuBd,IAAvB,CAA4B,CAA5B,CAAb,CACA,GAAIH,CAAAA,MAAM,CAAGpB,KAAK,CAACuB,IAAN,CAAWe,MAAX,CAAkB,CAAlB,CAAb,CACA,GAAIN,CAAAA,KAAK,CAAGhC,KAAK,CAACuB,IAAN,CAAWc,QAAX,CAAoB,CAApB,EAAuBL,KAAnC,CACA9C,WAAW,CAAC,IAAMd,SAAS,CAAC+C,MAAD,CAAhB,CAA0Ba,KAAK,CAAG,GAAR,CAAcZ,MAAxC,CAAX,CACD,CANH,CADO,CAlBX,CA4BE,IAAI,CAAEG,IA5BR,EADF,CAPF,CADF,CA0CD,CAnFoD","sourcesContent":["import React, { Fragment } from \"react\";\r\nimport ChartComponent, { Chart } from \"react-chartjs-2\";\r\n\r\nimport {smallLineChartOptions} from \"./config\"\r\n\r\nconst addCommas = nStr => {\r\n  nStr += \"\";\r\n  var x = nStr.split(\".\");\r\n  var x1 = x[0];\r\n  var x2 = x.length > 1 ? \".\" + x[1] : \"\";\r\n  var rgx = /(\\d+)(\\d{3})/;\r\n  while (rgx.test(x1)) {\r\n    x1 = x1.replace(rgx, \"$1,$2\");\r\n  }\r\n  return x1 + x2;\r\n};\r\n\r\nexport default class SmallLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.changeState = this.changeState.bind(this);\r\n    this.state = {\r\n      currentValue: \"\",\r\n      currentLabel: \"\"\r\n    };\r\n    Chart.defaults.lineWithLine = Chart.defaults.line;\r\n    Chart.controllers.lineWithLine = Chart.controllers.line.extend({\r\n      draw: function(ease) {\r\n        Chart.controllers.line.prototype.draw.call(this, ease);\r\n\r\n        if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\r\n          var activePoint = this.chart.tooltip._active[0];\r\n          var ctx = this.chart.ctx;\r\n          var x = activePoint.tooltipPosition().x;\r\n          var topY = this.chart.scales[\"y-axis-0\"].top;\r\n          var bottomY = this.chart.scales[\"y-axis-0\"].bottom;\r\n\r\n          ctx.save();\r\n          ctx.beginPath();\r\n          ctx.moveTo(x, topY);\r\n          ctx.lineTo(x, bottomY);\r\n          ctx.lineWidth = 1;\r\n          ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n          ctx.stroke();\r\n          ctx.restore();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  changeState(yLabel, xLabel) {\r\n    this.setState({ currentValue: yLabel, currentLabel: xLabel });\r\n  }\r\n\r\n  render() {\r\n    const changeState = this.changeState;\r\n    const {data} = this.props\r\n    \r\n    return (\r\n      <Fragment>\r\n        <div>\r\n          <p className=\"lead color-theme-1 mb-1 value\">\r\n            {this.state.currentValue}\r\n          </p>\r\n          <p className=\"mb-0 label text-small\">{this.state.currentLabel}</p>\r\n        </div>\r\n        <div className=\"chart\">\r\n          <ChartComponent\r\n            ref={ref => (this.chart_instance = ref && ref.chart_instance)}\r\n            type=\"lineWithLine\"\r\n            options={{\r\n              ...smallLineChartOptions,\r\n              tooltips: {\r\n                intersect: false,\r\n                enabled: false,\r\n                custom: function(tooltipModel) {\r\n                  if (tooltipModel && tooltipModel.dataPoints) {\r\n                    var yLabel = tooltipModel.dataPoints[0].yLabel;\r\n                    var xLabel = tooltipModel.dataPoints[0].xLabel;\r\n                    var label = tooltipModel.body[0].lines[0].split(\":\")[0];\r\n                    changeState(\"$\" + addCommas(yLabel), label + \"-\" + xLabel);\r\n                  }\r\n                }\r\n              }\r\n            }}\r\n            plugins={[\r\n              {\r\n                afterInit: function(chart, options) {\r\n                  var yLabel = chart.data.datasets[0].data[0];\r\n                  var xLabel = chart.data.labels[0];\r\n                  var label = chart.data.datasets[0].label;\r\n                  changeState(\"$\" + addCommas(yLabel), label + \"-\" + xLabel);\r\n                }\r\n              }\r\n            ]}\r\n            data={data}\r\n          />\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}