{"ast":null,"code":"import _objectSpread from \"/Users/soier/Code/santa/studio_v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/soier/Code/santa/studio_v2/src/components/charts/SmallLine.js\";\nimport React, { Fragment } from \"react\";\nimport ChartComponent, { Chart } from \"react-chartjs-2\";\nimport { smallLineChartOptions } from \"./config\";\n\nconst addCommas = nStr => {\n  nStr += \"\";\n  var x = nStr.split(\".\");\n  var x1 = x[0];\n  var x2 = x.length > 1 ? \".\" + x[1] : \"\";\n  var rgx = /(\\d+)(\\d{3})/;\n\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, \"$1,$2\");\n  }\n\n  return x1 + x2;\n};\n\nexport default class SmallLine extends React.Component {\n  constructor(props) {\n    super(props);\n    this.changeState = this.changeState.bind(this);\n    this.state = {\n      currentValue: \"\",\n      currentLabel: \"\"\n    };\n    Chart.defaults.lineWithLine = Chart.defaults.line;\n    Chart.controllers.lineWithLine = Chart.controllers.line.extend({\n      draw: function draw(ease) {\n        Chart.controllers.line.prototype.draw.call(this, ease);\n\n        if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\n          var activePoint = this.chart.tooltip._active[0];\n          var ctx = this.chart.ctx;\n          var x = activePoint.tooltipPosition().x;\n          var topY = this.chart.scales[\"y-axis-0\"].top;\n          var bottomY = this.chart.scales[\"y-axis-0\"].bottom;\n          ctx.save();\n          ctx.beginPath();\n          ctx.moveTo(x, topY);\n          ctx.lineTo(x, bottomY);\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\n          ctx.stroke();\n          ctx.restore();\n        }\n      }\n    });\n  }\n\n  changeState(yLabel, xLabel) {\n    this.setState({\n      currentValue: yLabel,\n      currentLabel: xLabel\n    });\n  }\n\n  render() {\n    const changeState = this.changeState;\n    const data = this.props.data;\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"lead color-theme-1 mb-1 value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, this.state.currentValue), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-0 label text-small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    }, this.state.currentLabel)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ChartComponent, {\n      ref: _ref => this.chart_instance = _ref && _ref.chart_instance,\n      type: \"lineWithLine\",\n      options: _objectSpread({}, smallLineChartOptions, {\n        tooltips: {\n          intersect: false,\n          enabled: false,\n          custom: function custom(tooltipModel) {\n            if (tooltipModel && tooltipModel.dataPoints) {\n              var yLabel = tooltipModel.dataPoints[0].yLabel;\n              var xLabel = tooltipModel.dataPoints[0].xLabel;\n              var label = tooltipModel.body[0].lines[0].split(\":\")[0];\n              changeState(\"$\" + addCommas(yLabel), label + \"-\" + xLabel);\n            }\n          }\n        }\n      }),\n      plugins: [{\n        afterInit: function afterInit(chart, options) {\n          var yLabel = chart.data.datasets[0].data[0];\n          var xLabel = chart.data.labels[0];\n          var label = chart.data.datasets[0].label;\n          changeState(\"$\" + addCommas(yLabel), label + \"-\" + xLabel);\n        }\n      }],\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/soier/Code/santa/studio_v2/src/components/charts/SmallLine.js"],"names":["React","Fragment","ChartComponent","Chart","smallLineChartOptions","addCommas","nStr","x","split","x1","x2","length","rgx","test","replace","SmallLine","Component","constructor","props","changeState","bind","state","currentValue","currentLabel","defaults","lineWithLine","line","controllers","extend","draw","ease","prototype","call","chart","tooltip","_active","activePoint","ctx","tooltipPosition","topY","scales","top","bottomY","bottom","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","yLabel","xLabel","setState","render","data","ref","chart_instance","tooltips","intersect","enabled","custom","tooltipModel","dataPoints","label","body","lines","afterInit","options","datasets","labels"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\r\nimport ChartComponent, { Chart } from \"react-chartjs-2\";\r\n\r\nimport {smallLineChartOptions} from \"./config\"\r\n\r\nconst addCommas = nStr => {\r\n  nStr += \"\";\r\n  var x = nStr.split(\".\");\r\n  var x1 = x[0];\r\n  var x2 = x.length > 1 ? \".\" + x[1] : \"\";\r\n  var rgx = /(\\d+)(\\d{3})/;\r\n  while (rgx.test(x1)) {\r\n    x1 = x1.replace(rgx, \"$1,$2\");\r\n  }\r\n  return x1 + x2;\r\n};\r\n\r\nexport default class SmallLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.changeState = this.changeState.bind(this);\r\n    this.state = {\r\n      currentValue: \"\",\r\n      currentLabel: \"\"\r\n    };\r\n    Chart.defaults.lineWithLine = Chart.defaults.line;\r\n    Chart.controllers.lineWithLine = Chart.controllers.line.extend({\r\n      draw: function(ease) {\r\n        Chart.controllers.line.prototype.draw.call(this, ease);\r\n\r\n        if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\r\n          var activePoint = this.chart.tooltip._active[0];\r\n          var ctx = this.chart.ctx;\r\n          var x = activePoint.tooltipPosition().x;\r\n          var topY = this.chart.scales[\"y-axis-0\"].top;\r\n          var bottomY = this.chart.scales[\"y-axis-0\"].bottom;\r\n\r\n          ctx.save();\r\n          ctx.beginPath();\r\n          ctx.moveTo(x, topY);\r\n          ctx.lineTo(x, bottomY);\r\n          ctx.lineWidth = 1;\r\n          ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n          ctx.stroke();\r\n          ctx.restore();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  changeState(yLabel, xLabel) {\r\n    this.setState({ currentValue: yLabel, currentLabel: xLabel });\r\n  }\r\n\r\n  render() {\r\n    const changeState = this.changeState;\r\n    const {data} = this.props\r\n    \r\n    return (\r\n      <Fragment>\r\n        <div>\r\n          <p className=\"lead color-theme-1 mb-1 value\">\r\n            {this.state.currentValue}\r\n          </p>\r\n          <p className=\"mb-0 label text-small\">{this.state.currentLabel}</p>\r\n        </div>\r\n        <div className=\"chart\">\r\n          <ChartComponent\r\n            ref={ref => (this.chart_instance = ref && ref.chart_instance)}\r\n            type=\"lineWithLine\"\r\n            options={{\r\n              ...smallLineChartOptions,\r\n              tooltips: {\r\n                intersect: false,\r\n                enabled: false,\r\n                custom: function(tooltipModel) {\r\n                  if (tooltipModel && tooltipModel.dataPoints) {\r\n                    var yLabel = tooltipModel.dataPoints[0].yLabel;\r\n                    var xLabel = tooltipModel.dataPoints[0].xLabel;\r\n                    var label = tooltipModel.body[0].lines[0].split(\":\")[0];\r\n                    changeState(\"$\" + addCommas(yLabel), label + \"-\" + xLabel);\r\n                  }\r\n                }\r\n              }\r\n            }}\r\n            plugins={[\r\n              {\r\n                afterInit: function(chart, options) {\r\n                  var yLabel = chart.data.datasets[0].data[0];\r\n                  var xLabel = chart.data.labels[0];\r\n                  var label = chart.data.datasets[0].label;\r\n                  changeState(\"$\" + addCommas(yLabel), label + \"-\" + xLabel);\r\n                }\r\n              }\r\n            ]}\r\n            data={data}\r\n          />\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}