(this.webpackJsonpstudio_v2=this.webpackJsonpstudio_v2||[]).push([[8],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(4),n=a.n(s),c=a(15),l=a.n(c),r=a(128);class i extends n.a.Component{constructor(...e){super(...e),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.toggle=this.toggle.bind(this),this.state={isOpen:!1}}handleDocumentClick(e){const t=l.a.findDOMNode(this);t.contains(e.target)||t===e.target||this.toggle(e)}toggle(e){e.preventDefault();const t=this.state.isOpen;t?this.removeEvents():this.addEvents(),this.setState({isOpen:!t})}componentWillUnmount(){this.removeEvents()}addEvents(){["click","touchstart"].forEach(e=>document.addEventListener(e,this.handleDocumentClick,!0))}removeEvents(){["click","touchstart"].forEach(e=>document.removeEventListener(e,this.handleDocumentClick,!0))}render(){return n.a.createElement("div",{className:"app-menu ".concat(this.state.isOpen?"shown":"")},this.props.children,n.a.createElement(r.a,{className:"app-menu-button d-inline-block d-xl-none",onClick:this.toggle},n.a.createElement("i",{className:"simple-icon-options"})))}}},101:function(e,t,a){"use strict";var s=a(9),n=a(11),c=a(4),l=a.n(c),r=a(27),i=a.n(r),o=a(60),m=a.n(o),p=a(62),d={tag:p.q,inverse:i.a.bool,color:i.a.string,body:i.a.bool,outline:i.a.bool,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},u=function(e){var t=e.className,a=e.cssModule,c=e.color,r=e.body,i=e.inverse,o=e.outline,d=e.tag,u=e.innerRef,h=Object(n.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),b=Object(p.m)(m()(t,"card",!!i&&"text-white",!!r&&"card-body",!!c&&(o?"border":"bg")+"-"+c),a);return l.a.createElement(d,Object(s.a)({},h,{className:b,ref:u}))};u.propTypes=d,u.defaultProps={tag:"div"},t.a=u},109:function(e,t,a){"use strict";var s=a(9),n=a(11),c=a(4),l=a.n(c),r=a(27),i=a.n(r),o=a(60),m=a.n(o),p=a(62),d={tag:p.q,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},u=function(e){var t=e.className,a=e.cssModule,c=e.innerRef,r=e.tag,i=Object(n.a)(e,["className","cssModule","innerRef","tag"]),o=Object(p.m)(m()(t,"card-body"),a);return l.a.createElement(r,Object(s.a)({},i,{className:o,ref:c}))};u.propTypes=d,u.defaultProps={tag:"div"},t.a=u},128:function(e,t,a){"use strict";var s=a(9),n=a(11),c=a(69),l=a(66),r=a(4),i=a.n(r),o=a(27),m=a.n(o),p=a(60),d=a.n(p),u=a(62),h={tag:u.q,innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),disabled:m.a.bool,active:m.a.bool,className:m.a.string,cssModule:m.a.object,onClick:m.a.func,href:m.a.any},b=function(e){function t(t){var a;return(a=e.call(this,t)||this).onClick=a.onClick.bind(Object(c.a)(a)),a}Object(l.a)(t,e);var a=t.prototype;return a.onClick=function(e){this.props.disabled?e.preventDefault():("#"===this.props.href&&e.preventDefault(),this.props.onClick&&this.props.onClick(e))},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.active,l=e.tag,r=e.innerRef,o=Object(n.a)(e,["className","cssModule","active","tag","innerRef"]),m=Object(u.m)(d()(t,"nav-link",{disabled:o.disabled,active:c}),a);return i.a.createElement(l,Object(s.a)({},o,{ref:r,onClick:this.onClick,className:m}))},t}(i.a.Component);b.propTypes=h,b.defaultProps={tag:"a"},t.a=b},166:function(e,t,a){"use strict";var s=a(9),n=a(11),c=a(4),l=a.n(c),r=a(27),i=a.n(r),o=a(60),m=a.n(o),p=a(62),d={tag:p.q,className:i.a.string,cssModule:i.a.object},u=function(e){var t=e.className,a=e.cssModule,c=e.tag,r=Object(n.a)(e,["className","cssModule","tag"]),i=Object(p.m)(m()(t,"card-header"),a);return l.a.createElement(c,Object(s.a)({},r,{className:i}))};u.propTypes=d,u.defaultProps={tag:"div"},t.a=u},223:function(e,t,a){"use strict";var s=a(9),n=a(11),c=a(69),l=a(66),r=a(4),i=a.n(r),o=a(27),m=a.n(o),p=a(60),d=a.n(p),u=a(62),h={children:m.a.node,type:m.a.string,size:m.a.string,bsSize:m.a.string,valid:m.a.bool,invalid:m.a.bool,tag:u.q,innerRef:m.a.oneOfType([m.a.object,m.a.func,m.a.string]),plaintext:m.a.bool,addon:m.a.bool,className:m.a.string,cssModule:m.a.object},b=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(l.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,l=e.bsSize,r=e.valid,o=e.invalid,m=e.tag,p=e.addon,h=e.plaintext,b=e.innerRef,g=Object(n.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),f=["radio","checkbox"].indexOf(c)>-1,v=new RegExp("\\D","g"),E=m||("select"===c||"textarea"===c?c:"input"),N="form-control";h?(N+="-plaintext",E=m||"input"):"file"===c?N+="-file":f&&(N=p?null:"form-check-input"),g.size&&v.test(g.size)&&(Object(u.t)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),l=g.size,delete g.size);var C=Object(u.m)(d()(t,o&&"is-invalid",r&&"is-valid",!!l&&"form-control-"+l,N),a);return("input"===E||m&&"function"===typeof m)&&(g.type=c),g.children&&!h&&"select"!==c&&"string"===typeof E&&"select"!==E&&(Object(u.t)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete g.children),i.a.createElement(E,Object(s.a)({},g,{ref:b,className:C}))},t}(i.a.Component);b.propTypes=h,b.defaultProps={type:"text"},t.a=b},253:function(e,t,a){"use strict";var s=a(9),n=a(66),c=a(4),l=a.n(c),r=a(82),i=a(27),o=a.n(i),m=a(60),p=a.n(m),d=a(90),u=a(62),h={tag:u.q,activeTab:o.a.any,className:o.a.string,cssModule:o.a.object},b=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}return Object(n.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},t.prototype.render=function(){var e=this.props,t=e.className,a=e.cssModule,n=e.tag,c=Object(u.n)(this.props,Object.keys(h)),r=Object(u.m)(p()("tab-content",t),a);return l.a.createElement(d.a.Provider,{value:{activeTabId:this.state.activeTab}},l.a.createElement(n,Object(s.a)({},c,{className:r})))},t}(c.Component);Object(r.polyfill)(b),t.a=b,b.propTypes=h,b.defaultProps={tag:"div"}},254:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var s=a(9),n=a(11),c=a(4),l=a.n(c),r=a(27),i=a.n(r),o=a(60),m=a.n(o),p=a(90),d=a(62),u={tag:d.q,className:i.a.string,cssModule:i.a.object,tabId:i.a.any};function h(e){var t=e.className,a=e.cssModule,c=e.tabId,r=e.tag,i=Object(n.a)(e,["className","cssModule","tabId","tag"]),o=function(e){return Object(d.m)(m()("tab-pane",t,{active:c===e}),a)};return l.a.createElement(p.a.Consumer,null,(function(e){var t=e.activeTabId;return l.a.createElement(r,Object(s.a)({},i,{className:o(t)}))}))}h.propTypes=u,h.defaultProps={tag:"div"}},541:function(e,t,a){"use strict";a.r(t);var s=a(4),n=a.n(s),c=a(75),l=a(21),r=a(77),i=a.n(r),o=a(313),m=a(67),p=a(1),d=a(166),u=a(558),h=a(559),b=a(253),g=a(254),f=a(64),v=a(60),E=a.n(v),N=a(63),C=a(100);class x extends s.Component{constructor(e){super(e),this.toggleAppMenu=e=>{this.props.activeTab!==e&&this.props.toggleAppMenu(e),"messages"===e&&this.handleSearchContact("")},this.handleSearchContact=e=>{this.setState({searchKey:e}),e.length>0?("contacts"!==this.props.activeTab&&this.props.toggleAppMenu("contacts"),this.props.searchContact(e)):this.props.searchContact("")},this.handleConversationClick=(e,t)=>{this.props.changeConversation(t),this.handleSearchContact("")},this.handleContactClick=e=>{"messages"!==this.props.activeTab&&(this.props.toggleAppMenu("messages"),this.props.searchContact(""));const t=this.props.chatApp,a=t.conversations,s=t.currentUser;a.find(t=>t.users.includes(s.id)&&t.users.includes(e))||this.props.createConversation(s.id,e,a),this.props.changeConversation(e)},this.state={searchKey:""}}render(){const e=this.props.chatApp,t=e.contacts,a=e.allContacts,s=e.conversations,c=e.loadingConversations,l=e.loadingContacts,r=e.currentUser,o=this.props.intl.messages;return n.a.createElement(C.a,null,n.a.createElement(d.a,{className:"pl-0 pr-0"},n.a.createElement(u.a,{tabs:!0,className:"card-header-tabs ml-0 mr-0"},n.a.createElement(h.a,{className:"w-50 text-center"},n.a.createElement(f.b,{to:"#",location:{},className:E()({active:"messages"===this.props.activeTab,"nav-link":!0}),onClick:()=>{this.toggleAppMenu("messages")}},n.a.createElement(N.a,{id:"chat.messages"}))),n.a.createElement(h.a,{className:"w-50 text-center"},n.a.createElement(f.b,{to:"#",location:{},className:E()({active:"contacts"===this.props.activeTab,"nav-link":!0}),onClick:()=>{this.toggleAppMenu("contacts")}},n.a.createElement(N.a,{id:"chat.contacts"}))))),n.a.createElement("div",{className:"pt-4 pr-4 pl-4 pb-0"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control rounded",placeholder:o["menu.search"],value:this.state.searchKey,onChange:e=>this.handleSearchContact(e.target.value)}))),n.a.createElement(b.a,{activeTab:this.props.activeTab,className:"chat-app-tab-content"},n.a.createElement(g.a,{tabId:"messages",className:"chat-app-tab-pane"},n.a.createElement(i.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},n.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},l&&c&&s.map((e,t)=>{const s=a.find(t=>t.id===e.users.find(e=>e!==r.id));return n.a.createElement("div",{key:t,className:"d-flex flex-row mb-1 border-bottom pb-3 mb-3"},n.a.createElement(f.b,{className:"d-flex",to:"#",location:{},onClick:e=>this.handleConversationClick(e,s.id)},n.a.createElement("img",{alt:s.name,src:s.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),n.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},n.a.createElement("div",{className:"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("p",{className:" mb-0 truncate"},s.name),n.a.createElement("p",{className:"mb-1 text-muted text-small"},e.lastMessageTime))))))})))),n.a.createElement(g.a,{tabId:"contacts",className:"chat-app-tab-pane"},n.a.createElement(i.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},n.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},l&&t.filter(e=>e.id!==r.id).map((e,t)=>n.a.createElement("div",{key:t,className:"d-flex flex-row mb-3 border-bottom pb-3"},n.a.createElement(f.b,{className:"d-flex",to:"#",location:{},onClick:()=>this.handleContactClick(e.id)},n.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),n.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},n.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("p",{className:"mb-0 truncate"},e.name))))))))))))}}var y=Object(c.d)(Object(l.b)(({chatApp:e})=>({chatApp:e}),{changeConversation:p.gb,createConversation:p.lb,searchContact:p.zb})(x));var j=({name:e,thumb:t,lastSeenDate:a})=>n.a.createElement(s.Fragment,null,n.a.createElement("div",{className:"d-flex flex-row chat-heading"},n.a.createElement("div",{className:"d-flex"},n.a.createElement("img",{alt:e,src:t,className:"img-thumbnail border-0 rounded-circle ml-0 mr-4 list-thumbnail align-self-center small"})),n.a.createElement("div",{className:" d-flex min-width-zero"},n.a.createElement("div",{className:"card-body pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("div",null,n.a.createElement("p",{className:"list-item-heading mb-1 truncate "},e)),n.a.createElement("p",{className:"mb-0 text-muted text-small"},"0"===a?"-":a))))),n.a.createElement("div",{className:"separator mb-5"})),O=a(101),k=a(109);var w=({sender:e,item:t,currentUserid:a})=>n.a.createElement(s.Fragment,null,n.a.createElement(O.a,{className:"d-inline-block mb-3 float-".concat(t.sender!==a?"left":"right")},n.a.createElement("div",{className:"position-absolute  pt-1 pr-2 r-0"},n.a.createElement("span",{className:"text-extra-small text-muted"},t.time)),n.a.createElement(k.a,null,n.a.createElement("div",{className:"d-flex flex-row pb-1"},n.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),n.a.createElement("div",{className:" d-flex flex-grow-1 min-width-zero"},n.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},n.a.createElement("div",{className:"min-width-zero"},n.a.createElement("p",{className:"mb-0 truncate list-item-heading"},e.name))))),n.a.createElement("div",{className:"chat-text-left"},n.a.createElement("p",{className:"mb-0 text-semi-muted"},t.text)))),n.a.createElement("div",{className:"clearfix"})),T=a(223),M=a(190);class A extends s.Component{render(){const e=this.props,t=e.placeholder,a=e.messageInput,s=e.handleChatInputPress,c=e.handleChatInputChange,l=e.handleSendButtonClick;return n.a.createElement("div",{className:"chat-input-container d-flex justify-content-between align-items-center"},n.a.createElement(T.a,{className:"form-control flex-grow-1",type:"text",placeholder:t,value:a,onKeyPress:e=>s(e),onChange:e=>c(e)}),n.a.createElement("div",null,n.a.createElement(M.a,{outline:!0,color:"primary",className:"icon-button large ml-1"},n.a.createElement("i",{className:"simple-icon-paper-clip"})),n.a.createElement(M.a,{color:"primary",className:"icon-button large ml-1",onClick:()=>l()},n.a.createElement("i",{className:"simple-icon-arrow-right"}))))}}var I=A;class S extends s.Component{constructor(e){super(e),this.handleChatInputPress=e=>{"Enter"===e.key&&this.state.messageInput.length>0&&(this.props.addMessageToConversation(this.props.chatApp.currentUser.id,this.props.chatApp.selectedUser.id,this.state.messageInput,this.props.chatApp.conversations),this.setState({messageInput:"",menuActiveTab:"messages"}))},this.handleChatInputChange=e=>{this.setState({messageInput:e.target.value})},this.handleSendButtonClick=()=>{this.state.messageInput.length>0&&(this.props.addMessageToConversation(this.props.chatApp.currentUser.id,this.props.chatApp.selectedUser.id,this.state.messageInput,this.props.chatApp.conversations),this.setState({messageInput:"",menuActiveTab:"messages"}))},this.toggleAppMenu=e=>{this.setState({menuActiveTab:e})},this.state={menuActiveTab:"messages",messageInput:""}}componentDidMount(){this.props.getContacts(),this.props.getConversations(0),document.body.classList.add("no-footer")}componentWillUnmount(){document.body.classList.remove("no-footer")}componentDidUpdate(){this.props.chatApp.loadingConversations&&this.props.chatApp.loadingContacts&&null==this.props.chatApp.selectedUser&&this.props.changeConversation(this.props.chatApp.selectedUserId),this._scrollBarRef&&(this._scrollBarRef._ps.element.scrollTop=this._scrollBarRef._ps.contentHeight)}render(){const e=this.props.chatApp,t=e.allContacts,a=e.conversations,c=e.loadingConversations,l=e.loadingContacts,r=e.currentUser,p=e.selectedUser,d=this.state,u=d.menuActiveTab,h=d.messageInput,b=this.props.intl.messages,g=c&&l&&p?a.find(e=>e.users.includes(r.id)&&e.users.includes(p.id)):null;return c&&l?n.a.createElement(s.Fragment,null,n.a.createElement(o.a,{className:"app-row"},n.a.createElement(m.a,{xxs:"12",className:"chat-app"},c&&p&&n.a.createElement(j,{name:p.name,thumb:p.thumb,lastSeenDate:p.lastSeenDate}),g&&n.a.createElement(i.a,{ref:e=>{this._scrollBarRef=e},containerRef:e=>{},options:{suppressScrollX:!0,wheelPropagation:!1}},g.messages.map((e,a)=>{const s=t.find(t=>t.id===e.sender);return n.a.createElement(w,{key:a,sender:s,item:e,currentUserid:r.id})})))),n.a.createElement(I,{placeholder:b["chat.saysomething"],messageInput:h,handleChatInputPress:this.handleChatInputPress,handleChatInputChange:this.handleChatInputChange,handleSendButtonClick:this.handleSendButtonClick}),n.a.createElement(y,{activeTab:u,toggleAppMenu:this.toggleAppMenu})):n.a.createElement("div",{className:"loading"})}}t.default=Object(c.d)(Object(l.b)(({chatApp:e})=>({chatApp:e}),{getContacts:p.nb,getConversations:p.ob,changeConversation:p.gb,addMessageToConversation:p.db})(S))},90:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(4),n=a.n(s).a.createContext({})}}]);
//# sourceMappingURL=application-chat.e1889974.chunk.js.map